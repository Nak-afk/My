<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
  <title>Leaflet sample</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

</head>

<body>
  <p>Значення можна змінювати якщо їх немає у випадаючому списку!!!!!</p>
  <form>
    <label style='font-size: 16px; font-weight:bold;' for="start">Дата та час: </label>
    <input type="date" id="start" name="trip-start" style='font-size: 16px; font-weight:bold;' onchange="show111();"/>
    <input type="time" id="appt" name="appt" style='font-size: 16px; font-weight:bold;' onchange="showTime();"/>
   <form>
	
<p></p>

<label style='font-size: 16px; font-weight:bold;' for="start">Позиція: </label
<div style="width:250px;height:25px;border:0;padding:0;margin:0;">
  <select id="idSelectPozicia" style="left:0px;width:350px; height:27px;line-height:18px;margin:0;padding:0; font-size: 16px; font-weight:bold;"
          onchange="showPoziciaSelect();document.getElementById('displayValuePosizia').value=this.options[this.selectedIndex].text; document.getElementById('idPosizia').value=this.options[this.selectedIndex].value;">
    <option value="one">"Короїд" (37U DQ 99999 99999)</option>
    <option value="two">"Айова" (37U DQ 99999 99999)</option>
    <option value="three">"Конго" (37U DQ 99999 99999)</option>
  </select>
  <input type="text" name="displayValuePosizia" id="displayValuePosizia" onchange="showPozicia();"
         placeholder="Короїд" (37U DQ 99999 99999)" onfocus="this.select()"
         style="position:absolute; left:76px;top:93px;width:320px;height:23px;border:1px solid #556; font-size: 16px; font-weight:bold;"  >
  <input name="idPosizia" id="idPosizia" type="hidden">
</div>

<p></p>

<label style='font-size: 16px; font-weight:bold;' for="start">Підрозділ FPV: </label
<div style="width:200px;height:25px;border:0;padding:0;margin:0;">
  <select id="idPidrozdilFPVSelect" style="left:0px;width:200px; height:27px;line-height:18px;margin:0;padding:0; font-size: 16px; font-weight:bold;"
          onchange="showPidrozdilFPVSelect();document.getElementById('displayValuePidrozdilFPV').value=this.options[this.selectedIndex].text; document.getElementById('idPidrozdilFPV').value=this.options[this.selectedIndex].value;">
    <option value="1">зрадн</option>
    <option value="2">зрадн/2мб</option>
    <option value="3">зрадн/2зрбатр</option>
    <option value="3">зрадн/2шб</option>
  </select>
  <input type="text" name="displayValuePidrozdilFPV" id="displayValuePidrozdilFPV" onchange="showPidrozdilFPV();"
         placeholder="зрадн" onfocus="this.select()"
         style="position:relative;left:-204px;top:0px;width:170px;width:280px\9;#width:280px;height:23px; height:21px\9;#height:18px;border:1px solid #556; font-size: 16px; font-weight:bold;"  >
  <input name="idPidrozdilFPV" id="idPidrozdilFPV" type="hidden">
</div>


<p></p>

<label style='font-size: 16px; font-weight:bold;' for="start">Пілот: </label
<div style="width:200px;height:25px;border:0;padding:0;margin:0;">
  <select id="idPiotSelect" style="left:0px;width:200px; height:27px;line-height:18px;margin:0;padding:0; font-size: 16px; font-weight:bold;"
          onchange="showPilotSelect();document.getElementById('displayValuePilot').value=this.options[this.selectedIndex].text; document.getElementById('idPilot').value=this.options[this.selectedIndex].value;">
    <option value="1">Бецик</option>
    <option value="2">Отаман</option>
    <option value="3">Дес</option>
    <option value="4">Жах</option>
    <option value="5">Маестро</option>
    <option value="6">Мрійник</option>
    <option value="7">Ґарден</option>
    <option value="8">Вепр</option>
    <option value="9">Птаха</option>
  </select>
  <input type="text" name="displayValuePilot" id="displayValuePilot" onchange="showPilotFPV();"
         placeholder="Бецик" onfocus="this.select()"
         style="position:relative;left:-204px;top:-1px;width:170px;width:280px\9;#width:280px;height:23px;border:1px solid #556; font-size: 16px; font-weight:bold;"  >
  <input name="idPilot" id="idPilot" type="hidden">
</div>

<p></p>

<label style='font-size: 16px; font-weight:bold;' for="start">Тип виявленної цілі: </label
<div style="width:200px;height:25px;border:0;padding:0;margin:0;">
  <select id="idTipCiliSelect" style="left:0px;width:200px; height:27px;line-height:18px;margin:0;padding:0; font-size: 16px; font-weight:bold;"
          onchange="showTipCiliSelect();document.getElementById('displayValueTipViyavlCili').value=this.options[this.selectedIndex].text; document.getElementById('idTipViyavlCili').value=this.options[this.selectedIndex].value;">
    <option value="1">Орлан</option>
    <option value="2">Орлан-10</option>
    <option value="3">Орлан-30</option>
    <option value="4">Зала</option>
    <option value="5">Суперкам</option>
    <option value="6">Невідомий</option>
  </select>
  <input type="text" name="displayValueTipViyavlCili" id="displayValueTipViyavlCili" onchange="showTipCiliFPV();"
         placeholder="Орлан" onfocus="this.select()"
         style="position:absolute;left:162px;top:223px;width:170px;width:280px\9;#width:280px;height:23px; border:1px solid #556; font-size: 16px; font-weight:bold;"  >
  <input name="idTipViyavlCili" id="idTipViyavlCili" type="hidden">
</div>

	 <p></p> 
	  
  <div class="box" style="display:flex;">
    <div><label style='font-size: 16px; font-weight:bold;' for="start">Координати виявлення: </label></div>
    <div><input type="text" id="CQ" placeholder="Тицьни на карту" style='font-size: 16px; font-weight:bold;'></div>
  </div>
  <div class="box" style="display:flex;">
    <div><label style='font-size: 16px; font-weight:bold;' for="start"> Район виявлення: </label></div>
    <div><input type="text" id="CQ222" placeholder="Тицьни на карту" style='font-size: 16px; font-weight:bold;'></div>
  </div>

  <div class="box" style="display:flex;">
<div><input type="text" id="latitude" placeholder="latitude" style='font-size: 10px; font-weight:bold;'></div>
<div><input type="text" id="longitude" placeholder="longitude" style='font-size: 10px; font-weight:bold;'></div>
  </div>
  
      <div class="mapMy" id="map" style="width: 700px; height: 480px"></div>
	    
<p></p>

  <div class="box" style="display:flex;">
    <div><label style='font-size: 16px; font-weight:bold;' for="start">Висота цілі: </label
<div style="width:200px;height:25px;border:0;padding:0;margin:0;">
  <select id="idVisotaCiliSelect" style="left:0px;width:200px; height:27px;line-height:18px;margin:0;padding:0; font-size: 16px; font-weight:bold;"
          onchange="showVisotaCiliSelect();document.getElementById('displayValueVisotaCili').value=this.options[this.selectedIndex].text; document.getElementById('idVisotaCili').value=this.options[this.selectedIndex].value;">
    <option value="1">500</option>
    <option value="2">600</option>
    <option value="3">700</option>
    <option value="4">800</option>
    <option value="5">900</option>
    <option value="6">1000</option>
    <option value="7">1100</option>
    <option value="8">1200</option>
    <option value="9">1300</option>
    <option value="10">1400</option>
    <option value="11">1500</option>
    <option value="12">1600</option>
    <option value="13">1700</option>
    <option value="14">1800</option>
    <option value="15">1900</option>
    <option value="16">2000</option>
    <option value="17">2100</option>
    <option value="18">2200</option>
    <option value="19">2300</option>
    <option value="20">2400</option>
    <option value="21">2500</option>
    <option value="22">2600</option>
    <option value="23">2700</option>
    <option value="24">2800</option>
    <option value="25">2900</option>
    <option value="26">3000</option>
    <option value="27">3100</option>
    <option value="28">3200</option>
    <option value="29">3300</option>
    <option value="30">3400</option>
    <option value="31">3500</option>
    <option value="32">3600</option>
    <option value="33">3700</option>
    <option value="34">3800</option>
    <option value="35">3900</option>
    <option value="36">4000</option>
    <option value="37">4100</option>
    <option value="38">4200</option>
    <option value="39">4300</option>
    <option value="40">4400</option>
    <option value="41">4500</option>
    <option value="42">4600</option>
    <option value="43">4700</option>
    <option value="44">4800</option>
    <option value="45">4900</option>
    <option value="46">5000</option>
    <option value="47">5100</option>
    <option value="48">5200</option>
    <option value="49">5300</option>
  </select>
  <input type="text" name="displayValueVisotaCili" id="displayValueVisotaCili"  onchange="showVisotaCiliFPV();"
         placeholder="2100" onfocus="this.select()"
         style="position:relative;left:-204px;top:0px;width:170px;width:280px\9;#width:280px;height:23px; height:21px\9;#height:18px;border:1px solid #556; font-size: 16px; font-weight:bold;"  >
  <input name="idVisotaCili" id="idVisotaCili" type="hidden">
</div></div>

<p></p>

    <div><label style='font-size: 16px; font-weight:bold;' for="start">Розмір FPV: </label
<div style="width:200px;height:25px;border:0;padding:0;margin:0;">
  <select id="idRozmirFPVSelect" style="left:0px;width:200px; height:27px;line-height:18px;margin:0;padding:0; font-size: 16px; font-weight:bold;"
          onchange="showRozmirFPVSelect(); document.getElementById('displayValueRozmirFPV').value=this.options[this.selectedIndex].text; document.getElementById('idRozmirFPV').value=this.options[this.selectedIndex].value;">
    <option value="one">10</option>
    <option value="two">8</option>
    <option value="three">7</option>
  </select>
  <input type="text" name="displayValueRozmirFPV" id="displayValueRozmirFPV" onchange="showVRozmirFPV();"
         placeholder="10" onfocus="this.select()"
         style="position:relative;left:-204px;top:-2px;width:170px;width:280px\9;#width:280px;height:23px; height:21px\9;#height:18px;border:1px solid #556; font-size: 16px; font-weight:bold;"  >
  <input name="idRozmirFPV" id="idRozmirFPV" type="hidden">
</div></div>

<p></p>

    <div><label style='font-size: 16px; font-weight:bold;' for="start">Тип FPV: </label
<div style="width:200px;height:25px;border:0;padding:0;margin:0;">
  <select id="idTipFPVSelect" style="left:0px;width:200px; height:27px;line-height:18px;margin:0;padding:0; font-size: 16px; font-weight:bold;"
          onchange="showTipFPVSelect(); document.getElementById('displayValueTipFPV').value=this.options[this.selectedIndex].text; document.getElementById('idTipFPV').value=this.options[this.selectedIndex].value;">
    <option value="one">Денний</option>
    <option value="two">Нічний</option>
    <option value="three">Цифровий</option>
  </select>
  <input type="text" name="displayValueTipFPV" id="displayValueTipFPV" onchange="showTipFPV();"
         placeholder="Денний" onfocus="this.select()"
         style="position:relative;left:-204px;top:0px;width:170px;width:280px\9;#width:280px;height:23px; height:21px\9;#height:18px;border:1px solid #556; font-size: 16px; font-weight:bold;"  >
  <input name="idTipFPV" id="idTipFPV" type="hidden">
</div></div>

<p></p>

		<label style='font-size: 16px; font-weight:bold;' for="start">Результат: </label>
		<input style='position:relative; height: 22px; width: 22px; top:6px;' type="radio" name="tab" value="igotnone" onclick="show1();" />
		<label style='font-size: 16px; font-weight:bold;'for="111">Дрон повернуто</label>
		<input style='position:relative; height: 22px; width: 22px; top:6px;' type="radio" name="tab" value="igottwo" onclick="show2();" />
		<label style='font-size: 16px; font-weight:bold;'for="222">Дрон втрачено</label>
		<input style='position:relative; height: 22px; width: 22px; top:6px;' type="radio" name="tab" value="igotthre" onclick="show3();" />
		<label style='font-size: 16px; font-weight:bold;'for="222">Дрон підірвано</label>
		<input style='position:relative; height: 22px; width: 22px; top:6px;' type="radio" name="tab" value="igotfour" onclick="show4();" />
		<label style='font-size: 16px; font-weight:bold;'for="222">Ціль знищена</label>

	 <p></p>
	 
<table id="CoordPodrivu">
    <tbody>
    <tr>
        <td><div><label style='font-size: 16px; font-weight:bold;' for="start">Координати підриву(втрати): </label></div></td>
        <td><div><input type="text" id="CQ2" placeholder="Тицьни на карту" style='font-size: 16px; font-weight:bold;'></div></td>
	   </tr>
	<tr>
        <td><div><label style='font-size: 16px; font-weight:bold;' for="start"> Район: </label></div></td>
		<td><div><input type="text" id="CQ333" placeholder="Тицьни на карту" style='font-size: 16px; font-weight:bold;'></div></td>
    </tr>
    <tr>
        <td><div><input type="text" id="latitude2" placeholder="latitude" style='font-size: 10px; font-weight:bold;'></div></td>
        <td><div><input type="text" id="longitude2" placeholder="longitude" style='position:relative; left:-100px; font-size: 10px; font-weight:bold;'></div></td>
    </tr>
    </tbody>
</table>
	  
      <div class="mapMy" id="map2" style="width: 700px; height: 480px"></div>
		
    <div id="idPrimitkiShowHide"><label style='font-size: 16px; font-weight:bold;' for="start">Примітки: </label
<div style="width:700px;height:25px;border:0;padding:0;margin:0;">
  <select id="idPrimitkiSelect" style="left:0px;width:500px; height:27px;line-height:18px;margin:0;padding:0; font-size: 16px; font-weight:bold;"
          onchange="showPrimitkiSelect(); document.getElementById('displayValuePrimitki').value=this.options[this.selectedIndex].text; document.getElementById('idPrimitki').value=this.options[this.selectedIndex].value;">
    <option value="1">Втрата керування.</option>
    <option value="2">Втрата відео та керування.</option>
    <option value="3">Не знайшли візуально ціль.</option>
    <option value="4">Сіла батарейка.</option>
    <option value="5">RX LOSS біля цілі.</option>
    <option value="6">Не наздогнали ціль.</option>
    <option value="7">Не наздогнали ціль, сіла батарея.</option>
  </select>

	  
  <input type="text" name="displayValuePrimitki" id="displayValuePrimitki"  onchange="showPrimitki();"
         placeholder="Втрата керування" onfocus="this.select()"
         style="position:absolute;left:88px;top:1565px;width:470px;width:780px\9;#width:280px;height:23px; height:21px\9;#height:18px;border:1px solid #556; font-size: 16px; font-weight:bold;"  >
  <input name="idPrimitki" id="idPrimitki" type="hidden">
</div></div>

<p></p>

<input type="text" onchange="showOsobSklad();" style="width:700px; font-size: 16px; font-weight:bold;" id="osobSklad" name="fname" value="о/с (Сірий, Білий, Полосатий, Кабінет)"><br><br>

<p></p>

<textarea wrap="soft" id="dopovid" name="name" style="word-wrap: break-word; word-break: break-all; width:700px; height:427px;font-size: 15px; font-weight:bold;"> Доповідь </textarea>
	  
      <script>
		var data = '05.10.2024';
		var chas = '22:06';
		var pozicia = 'Короїд" (37U DQ 99999 99999)';
		var pidrozdilFPV = 'зрадн';
		var pilot = 'Бецик';
		var tipCili = 'Орлан';
		var visotaCili = '2100';
		var rozmirFpv = '10';
		var tipFpv = 'Денний';
		var primitki = 'Втрата керування';
		var rezultat = 1;
		var koordinatyViyavlenya = '37 QC 12345 12345';
		var koordinatyPidrivu = '37 QC 12345 12345';
		var cityViyavlenya = 'Донецьк';
		var cityPidrivu = 'Донецьк';
		var osobSkladValue = 'о/с (Сірий, Білий, Полосатий, Кабінет)';
		var allertShow = 0;
	  
		document.getElementById('displayValuePosizia').value = 'Короїд" (37U DQ 99999 99999)';
		document.getElementById('displayValuePidrozdilFPV').value = 'зрадн';
		document.getElementById('displayValuePilot').value = 'Бецик';
		document.getElementById('displayValueTipViyavlCili').value = 'Орлан';
		document.getElementById('displayValueVisotaCili').value = '2100';
		document.getElementById('displayValueRozmirFPV').value = '10';
		document.getElementById('displayValueTipFPV').value = 'Денний';
		document.getElementById('displayValuePrimitki').value = 'Втрата керування';



		function show111(){////змінили дату!!!
			data = dateToCorrect(document.getElementById('start').value);
			//data = dateToCorrect(2024-10-05);
			generateDopovid();
		}		
		function showTime(){////змінили час!!!
			chas = document.getElementById('appt').value;
			//data = dateToCorrect(2024-10-05);
			generateDopovid();
		}
		
		function showPozicia(){////змінили позицію редагуванням тексту
			pozicia = document.getElementById('displayValuePosizia').value;
			//data = dateToCorrect(2024-10-05);
			generateDopovid();
		}
		
		function showPoziciaSelect(){////змінили позицію вибором зі списку
			
			var e = document.getElementById("idSelectPozicia");
			//var value = e.options[e.selectedIndex].value;
			var text = e.options[e.selectedIndex].text;
			pozicia = text;
			generateDopovid();
		}
		
		function showPidrozdilFPV(){////змінили підрозділ фпв редагуванням тексту
			pidrozdilFPV = document.getElementById('displayValuePidrozdilFPV').value;
			//data = dateToCorrect(2024-10-05);
			generateDopovid();
		}
		
		function showPidrozdilFPVSelect(){////змінили підрозділ фпв вибором зі списку
			
			var e = document.getElementById("idPidrozdilFPVSelect");
			//var value = e.options[e.selectedIndex].value;
			var text = e.options[e.selectedIndex].text;
			pidrozdilFPV = text;
			generateDopovid();
		}
		
		function showPilotFPV(){////змінили пілот редагуванням тексту
			pilot = document.getElementById('displayValuePilot').value;
			//data = dateToCorrect(2024-10-05);
			generateDopovid();
		}
		
		function showPilotSelect(){////змінили пілот вибором зі списку
			
			var e = document.getElementById("idPiotSelect");
			//var value = e.options[e.selectedIndex].value;
			var text = e.options[e.selectedIndex].text;
			pilot = text;
			generateDopovid();
		}
		
		function showTipCiliFPV(){////змінили тип цілі редагуванням тексту
			tipCili = document.getElementById('displayValueTipViyavlCili').value;
			//data = dateToCorrect(2024-10-05);
			generateDopovid();
		}
		
		function showTipCiliSelect(){////змінили тип цілі вибором зі списку
			
			var e = document.getElementById("idTipCiliSelect");
			//var value = e.options[e.selectedIndex].value;
			var text = e.options[e.selectedIndex].text;
			tipCili = text;
			generateDopovid();
		}
		
		function showVisotaCiliFPV(){////змінили тип цілі редагуванням тексту
			visotaCili = document.getElementById('displayValueVisotaCili').value;
			//data = dateToCorrect(2024-10-05);
			generateDopovid();
		}
		
		function showVisotaCiliSelect(){////змінили тип цілі вибором зі списку
			
			var e = document.getElementById("idVisotaCiliSelect");
			//var value = e.options[e.selectedIndex].value;
			var text = e.options[e.selectedIndex].text;
			visotaCili = text;
			generateDopovid();
		}
		
		function showVRozmirFPV(){////змінили тип цілі редагуванням тексту
			rozmirFpv = document.getElementById('displayValueRozmirFPV').value;
			//data = dateToCorrect(2024-10-05);
			generateDopovid();
		}
		
		function showRozmirFPVSelect(){////змінили тип цілі вибором зі списку
			
			var e = document.getElementById("idRozmirFPVSelect");
			//var value = e.options[e.selectedIndex].value;
			var text = e.options[e.selectedIndex].text;
			rozmirFpv = text;
			generateDopovid();
		}
		
		function showTipFPV(){////змінили тип цілі редагуванням тексту
			tipFpv = document.getElementById('displayValueTipFPV').value;
			//data = dateToCorrect(2024-10-05);
			generateDopovid();
		}
		
		function showTipFPVSelect(){////змінили тип цілі вибором зі списку
			
			var e = document.getElementById("idTipFPVSelect");
			//var value = e.options[e.selectedIndex].value;
			var text = e.options[e.selectedIndex].text;
			tipFpv = text;
			generateDopovid();
		}
		
		function showPrimitki(){////змінили тип цілі редагуванням тексту
			primitki = document.getElementById('displayValuePrimitki').value;
			//data = dateToCorrect(2024-10-05);
			generateDopovid();
		}
		
		function showPrimitkiSelect(){////змінили тип цілі вибором зі списку
			
			var e = document.getElementById("idPrimitkiSelect");
			//var value = e.options[e.selectedIndex].value;
			var text = e.options[e.selectedIndex].text;
			primitki = text;
			generateDopovid();
		}		
		function showOsobSklad(){////змінили тип цілі вибором зі списку
			
			osobSkladValue = document.getElementById('osobSklad').value;
			generateDopovid();
		}


	 
		function show1(){////дрон повернуто
			rezultat = 1;
			allertShow = 0;
			generateDopovid();
		
			document.getElementById('map2').style.display ='none';//ховаєм мапу
			document.getElementById('CoordPodrivu').style.display ='none';//ховаєм координати підриву(втрати)
			document.getElementById('idPrimitkiShowHide').style.display ='block';//показуєм примітки	
		}
		function show2(){//Дрон втрачено
			rezultat = 2;
			allertShow = 0;
			generateDopovid();
			
			document.getElementById('map2').style.display = 'block';//показуєм мапу
			document.getElementById('CoordPodrivu').style.display ='block';//показуєм координати підриву(втрати)
			document.getElementById('idPrimitkiShowHide').style.display ='block';//показуєм примітки
		}
		function show3(){//Дрон підірвано
			rezultat = 3;
			allertShow = 0;
			generateDopovid();
			
			document.getElementById('map2').style.display = 'block';//показуєм мапу
			document.getElementById('CoordPodrivu').style.display ='block';//показуєм координати підриву(втрати)
			document.getElementById('idPrimitkiShowHide').style.display ='block';//показуєм примітки
		}
		function show4(){//Ціль знищена
			rezultat = 4;
			generateDopovid();
			
			document.getElementById('map2').style.display = 'block';//показуєм мапу
			document.getElementById('CoordPodrivu').style.display ='block';//показуєм координати підриву(втрати)
			document.getElementById('idPrimitkiShowHide').style.display ='none';//БЛОКУЄМ примітки
		}
		
		
		function generateDopovid()
		{
		
		if (rezultat == '1'){////дрон повернуто
		var message = 
		data +
		"\nЧас: " + chas
		+ "\nСП зрадн " + pozicia
		+ "\n"+ pidrozdilFPV + " (FPV пілот " + pilot + " )  у взаємодії з реб 3 ошбр"
		+ "\nПодія: виявлено БпЛА тип «" + tipCili + "» р-н " + cityViyavlenya + " (" + koordinatyViyavlenya + "), вис. - " + visotaCili + "."
		+ "\nСпроба ураження за допомогою FPV " + rozmirFpv
		+ "\nВитрати:(" + tipFpv + ")"
		+ "\nДрон повернуто."
		+ "\nЦіль не знищена."
		+ "\nПричина: " + primitki
		+ "\n" + osobSkladValue;
		//alert(message);
		}
		
		if (rezultat == '2'){////Дрон втрачено
		var message = 
		data +
		"\nЧас: " + chas
		+ "\nСП зрадн " + pozicia
		+ "\n"+ pidrozdilFPV + " (FPV пілот " + pilot + " )  у взаємодії з реб 3 ошбр"
		+ "\nПодія: виявлено БпЛА тип «" + tipCili + "» р-н " + cityViyavlenya + " (" + koordinatyViyavlenya + "), вис. - " + visotaCili + "."
		+ "\nСпроба ураження за допомогою FPV " + rozmirFpv
		+ "\nВитрати:(" + tipFpv + ")"
		+ "\n- FPV 1шт."
		+ "\n- 1 заряд М112 (С4)."
		+ "\n- 1 шт ЕД-8-Ж-1М"
		+ "\nЦіль не знищена. Дрон втрачено р-н " + cityPidrivu + " (" + koordinatyPidrivu + ")"
		+ "\nПричина: " + primitki
		+ "\n" + osobSkladValue;
		//alert(message);
			
		}
		
		if (rezultat == '3'){////Дрон підірвано
		var message = 
		data +
		"\nЧас: " + chas
		+ "\nСП зрадн " + pozicia
		+ "\n"+ pidrozdilFPV + " (FPV пілот " + pilot + " )  у взаємодії з реб 3 ошбр"
		+ "\nПодія: виявлено БпЛА тип «" + tipCili + "» р-н " + cityViyavlenya + " (" + koordinatyViyavlenya + "), вис. - " + visotaCili + "."
		+ "\nСпроба ураження за допомогою FPV " + rozmirFpv
		+ "\nВитрати:(" + tipFpv + ")"
		+ "\n- FPV 1шт."
		+ "\n- 1 заряд М112 (С4)."
		+ "\n- 1 шт ЕД-8-Ж-1М"
		+ "\nЦіль не знищена. Дрон підірвано р-н " + cityPidrivu + " (" + koordinatyPidrivu + ")"
		+ "\nПричина: " + primitki
		+ "\n" + osobSkladValue;
		//alert(message);
		
		}
		
		if (rezultat == '4'){////Ціль знищена
		var message = 
		data +
		"\nЧас: " + chas
		+ "\nСП зрадн " + pozicia
		+ "\n"+ pidrozdilFPV + " (FPV пілот " + pilot + " )  у взаємодії з реб 3 ошбр"
		+ "\nПодія: виявлено БпЛА тип «" + tipCili + "» р-н " + cityViyavlenya + " (" + koordinatyViyavlenya + "), вис. - " + visotaCili + "."
		+ "\nСпроба ураження за допомогою FPV " + rozmirFpv
		+ "\nВитрати:(" + tipFpv + ")"
		+ "\n- FPV 1шт."
		+ "\n- 1 заряд М112 (С4)."
		+ "\n- 1 шт ЕД-8-Ж-1М"
		+ "\nЦіль знищена. р-н " + cityPidrivu + " (" + koordinatyPidrivu + ")"
		+ "\n" + osobSkladValue;
		
		if (allertShow == 0){
		alert('Ти не забув змінити час на час знищення?!?!?!?!?!');
		allertShow = 1;
		}
		
		
		///Ціль знищена. р-н Дружелюбівка (37UDQ 17263 58273)
		}
		
		
		
		document.getElementById('dopovid').value = message;
		
		
		//alert("Дата " + data + "Результат " + rezultat + "; координати " + koordinatyViyavlenya +" р-н "+ cityViyavlenya + " час " + 
		//chas +" позиція "+ pozicia +" підрозділ ФПВ "+ pidrozdilFPV +" пілот "+ pilot +" тип цілі "+ tipCili +" висота цілі "+ visotaCili +" розмір фпв " 
		//+ rozmirFpv +" тип фпв "+ tipFpv +" координати підриву"+koordinatyPidrivu +" р-н "+ cityPidrivu +"примітки"+ primitki);
		}
	  
	  
        // Creating map options///////////////////////////////////////////////////////////////////////////////////////////////
        var mapOptions = {
            center: [49.34773814633625, 37.77099609375],
            zoom: 12
          }
          // Creating a map object
        var map = new L.map('map', mapOptions);
        // Creating a Layer object
        var layer = new L.TileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png');
        // Adding layer to the map
        map.addLayer(layer);
		
		
        var marker;
        map.on('click', function(e) {
          if (marker) { // check
            map.removeLayer(marker); // remove old layers
          }
          marker = new L.Marker(e.latlng).addTo(map); // set New Layer
          //alert(mp.getLatLng());
          //alert("Lat, Lon : " + e.latlng.lat + ", " + e.latlng.lng)
          document.getElementById('latitude').value = e.latlng.lat;
          document.getElementById('longitude').value = e.latlng.lng;
		  
		  xxx = MGRSString(e.latlng.lat, e.latlng.lng);
          document.getElementById('CQ').value = xxx;
		  koordinatyViyavlenya = xxx;
		  
		  yyy = coordToCity(e.latlng.lat, e.latlng.lng);
		  document.getElementById('CQ222').value = yyy;
		  cityViyavlenya = yyy;

		  generateDopovid();
        });
        // Creating map options///////////////////////////////////////////////////////////////////////////////////////////////
        var mapOptions2 = {
            center: [49.34773814633625, 37.77099609375],
            zoom: 12
          }
          // Creating a map object
        var map2 = new L.map('map2', mapOptions2);
        // Creating a Layer object
        var layer2 = new L.TileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png');
        // Adding layer to the map
        map2.addLayer(layer2);
		
		
        var marker2;
        map2.on('click', function(e2) {
          if (marker2) { // check
            map2.removeLayer(marker2); // remove old layers
          }
          marker2 = new L.Marker(e2.latlng).addTo(map2); // set New Layer


		  xxx = MGRSString(e2.latlng.lat, e2.latlng.lng);
          document.getElementById('CQ2').value = xxx;
		  koordinatyPidrivu = xxx;
		  
		  yyy = coordToCity(e2.latlng.lat, e2.latlng.lng);
		  document.getElementById('CQ333').value = yyy;
		  cityPidrivu = yyy;

		  generateDopovid();


          document.getElementById('latitude2').value = e2.latlng.lat;
          document.getElementById('longitude2').value = e2.latlng.lng;
          document.getElementById('CQ2').value = MGRSString(e2.latlng.lat, e2.latlng.lng);
		  document.getElementById('CQ333').value = coordToCity(e2.latlng.lat, e2.latlng.lng);
        });
		
		
        var pidrozdilID = document.getElementById("pidrozdilID");
        var pilotID = document.getElementById("pilotID");
        var tipCiliID = document.getElementById("tipCiliID");
		
        function onChange() {

		  
          var value2 = pidrozdilID.value;
          var text2 = pidrozdilID.options[pidrozdilID.selectedIndex].text;
          document.getElementById('PidrozdilTextPole').value = text2;
		  
          var value3 = pilotID.value;
          var text3 = pilotID.options[pilotID.selectedIndex].text;
          document.getElementById('PilotTextPole').value = text3;
		  
          var value4 = tipCiliID.value;
          var text4 = tipCiliID.options[tipCiliID.selectedIndex].text;
          document.getElementById('tipCiliTextPole').value = text4;

        }

		pidrozdilID.onchange = onChange;
		pilotID.onchange = onChange;
		tipCiliID.onchange = onChange;
        onChange();
		
		
function dateToCorrect(dateIncorect){
	var word = dateIncorect.split('-');
	
	var year = word[0].substring(2);
	var mount = word[1];
	var date = word[2];
	
	var elements = [date, mount, year];
	
	var xxx = elements.join('.');
	return xxx;

}
		
		
		
function coordToCity (xCoordinate, yCoordinate){

  var cityName = [];
  var cityX = [];
  var cityY = [];
  cityName.push("Ізюмське"); cityX.push(`49.26844316873332, 37.8121450401825`);
  cityName.push("Дружелюбівка"); cityX.push(`49.262170410019735, 37.85990751916526`);
  cityName.push("Червоний Став"); cityX.push(`49.28495520277937, 37.84236984892218`);
  cityName.push("Ольгівка"); cityX.push(`49.24525587967145, 37.853768046299486`);
  cityName.push("Андріївка"); cityX.push(`49.241003172646174, 37.80887761687097`);
  cityName.push("Пролетарське"); cityX.push(`49.301234878762514, 37.84125420754936`);
  cityName.push("Чернещина"); cityX.push(`49.31467251592217, 37.84814311435962`);
  cityName.push("Новий Мир"); cityX.push(`49.2192531980968, 37.8253837446302`);
  cityName.push("Глущенкове"); cityX.push(`49.2147803450499, 37.78114161139965`);
  cityName.push("Новомихайлівка"); cityX.push(`49.20153057290288, 37.867542070193295`);
  cityName.push("Рідкодуб"); cityX.push(`49.1867749052992, 37.796909818643805`);
  cityName.push("Катеринівка"); cityX.push(`49.183385996710626, 37.86271519619197`);
  cityName.push("Греківка"); cityX.push(`49.245838734094605, 37.918749081261275`);
  cityName.push("Макіївка"); cityX.push(`49.22585949867171, 37.9822750954055`); 
  cityName.push("Нововодяне"); cityX.push(`49.27152834387727, 38.02125009544899`);
  cityName.push("Кармазинівка"); cityX.push(`49.30694748356752, 38.0213958749525`);
  cityName.push("Ковалівка"); cityX.push(`49.33319080761679, 38.01324847431075`);
  cityName.push("Новосергіївка"); cityX.push(`49.33820069225977, 37.85393924710135`);
  cityName.push("Твердохлібове"); cityX.push(`49.32965798588803, 37.926799294294305`);
  cityName.push("Вище Солоне"); cityX.push(`49.28261477814086, 37.742331242504974`);
  cityName.push("Нижче Солоне"); cityX.push(`49.304242178324564, 37.657423931962256`); 
  cityName.push("Маліївка"); cityX.push(`49.24384154087587, 37.71735737705087`); 
  cityName.push("Вовчий Яр"); cityX.push(`49.20210258957344, 37.663619297816744`);
  cityName.push("Нижня Журавка"); cityX.push(`49.33716600855384, 37.66353726382476`);
  cityName.push("Кругляківка"); cityX.push(`49.52050900088931, 37.72044301028472`);
  cityName.push("Лозове"); cityX.push(`49.20846963325931, 37.59602085743277`);
  cityName.push("Піски-Радьківські"); cityX.push(`49.26674845075525, 37.60982798979204`);
  cityName.push("Шийківка"); cityX.push(`49.350041837629945, 37.75315994034682`);
  cityName.push("Борова"); cityX.push(`49.380617785642414, 37.63165354757836`);
  cityName.push("Підлиман"); cityX.push(`49.33543243467169, 37.60367763325326`);
  cityName.push("Копанки"); cityX.push(`49.370173906642066, 37.849689413582105`);
  cityName.push("Першотравневе"); cityX.push(`49.38277751260421, 37.85379303784005`);
  cityName.push("Вишневе"); cityX.push(`49.40752690446529, 37.85761533366581`);
  cityName.push("Зелений Гай"); cityX.push(`49.40805792365636, 37.78817685777834`);
  cityName.push("Борівська Андріївка"); cityX.push(`49.41230852807062, 37.7320691268251`);
  cityName.push("Райгородка"); cityX.push(`49.37382754262181, 37.965054547028664`);
  cityName.push("Попівка"); cityX.push(`49.36088676088918, 38.07458504846005`);
  cityName.push("Нежурино"); cityX.push(`49.3813719438529, 38.05432074756261`);
  cityName.push("Бахтин"); cityX.push(`49.321722511936095, 37.529940838187756`);
  cityName.push("Новоплатонівка"); cityX.push(`49.43095684909106, 37.64635442002435`);
  cityName.push("Гороховатка"); cityX.push(`49.34293028718782, 37.52700585954397`);
  cityName.push("Мирне"); cityX.push(`49.35374278608268, 37.46331763021149`);
  cityName.push("Підвисоке"); cityX.push(`49.388928606932176, 37.44404695810584`);
  cityName.push("Гаврилівка"); cityX.push(`49.41151102820754, 37.50814478943958`);
  cityName.push("Біле"); cityX.push(`49.48352998174249, 37.55414883521207`);
  cityName.push("Лозова"); cityX.push(`49.46729272372816, 37.803876497186174`);
  cityName.push("Надія"); cityX.push(`49.37059438284501, 37.92527816237952`);
  cityName.push("Сергіївка"); cityX.push(`49.364045334604434, 37.95601481590259`);
  cityName.push("Джерельне"); cityX.push(`49.413533757784066, 37.951169126653134`);
  cityName.push("Паталахівка"); cityX.push(`49.4037269116207, 38.00650405501525`);
  cityName.push("Мясожарівка"); cityX.push(`49.44442419921403, 37.90629168573647`);
  cityName.push("Коломийчиха"); cityX.push(`49.44706977111233, 37.97209824591641`);
  cityName.push("Стельмахівка"); cityX.push(`49.47558915856815, 37.90326301009902`);
  cityName.push("Площанка"); cityX.push(`49.20620939149755, 38.086774960591775`);
  cityName.push("Невське"); cityX.push(`49.174889763091436, 37.976682886904065`);
  cityName.push("Нова Кругляківка"); cityX.push(`49.47363605170743, 37.722692784728096`);
  cityName.push("Богуславка"); cityX.push(`49.47446374209852, 37.688073998425615`);
  cityName.push("Новоплатонівка"); cityX.push(`49.4301508550652, 37.643895619837174`);
  cityName.push("Хомине"); cityX.push(`49.46500580166405, 37.6230604456596`);
  cityName.push("Дачне"); cityX.push(`49.393013736629435, 38.097288427781116`);
  cityName.push("Зміївка"); cityX.push(`49.451078660553804, 38.05877523602314`);
  cityName.push("Комарівка"); cityX.push(`49.2803787618754, 37.47325322212877`);
  cityName.push("Нове"); cityX.push(`49.16474207020011, 37.83244655703202`);
  cityName.push("Загризове"); cityX.push(`49.50316158026717, 37.71297454833984`);

  var arrayPos = 0;
  var smallestCoord = 10000000000000;

  for (let i = 0; i < cityName.length; i++) {
    var temp = cityX[i];
    //Logger.log(temp);
    //temp = temp.toString();
    var arrayOfStrings2 = temp.split(',');
    var xCoordArray = arrayOfStrings2[0].trim();
    var yCoordArray = arrayOfStrings2[1].trim();   

    var xDimens = xCoordinate - xCoordArray;
    xDimens = Math.abs(xDimens);
    var yDimens = yCoordinate - yCoordArray;
    yDimens = Math.abs(yDimens);
    coordSumm = xDimens + yDimens;

    if (coordSumm < smallestCoord){
      smallestCoord = coordSumm;
      arrayPos = i;
    }
  }
  return cityName[arrayPos];
  //Logger.log(cityName[arrayPos]);
}
		
		
		
		
		

        function MGRSString(Lat, Long) {
          if (Lat < -80) return 'Too far South';
          if (Lat > 84) return 'Too far North';
          var c = 1 + Math.floor((Long + 180) / 6);
          var e = c * 6 - 183;
          var k = Lat * Math.PI / 180;
          var l = Long * Math.PI / 180;
          var m = e * Math.PI / 180;
          var n = Math.cos(k);
          var o = 0.006739496819936062 * Math.pow(n, 2);
          var p = 40680631590769 / (6356752.314 * Math.sqrt(1 + o));
          var q = Math.tan(k);
          var r = q * q;
          var s = (r * r * r) - Math.pow(q, 6);
          var t = l - m;
          var u = 1.0 - r + o;
          var v = 5.0 - r + 9 * o + 4.0 * (o * o);
          var w = 5.0 - 18.0 * r + (r * r) + 14.0 * o - 58.0 * r * o;
          var x = 61.0 - 58.0 * r + (r * r) + 270.0 * o - 330.0 * r * o;
          var y = 61.0 - 479.0 * r + 179.0 * (r * r) - (r * r * r);
          var z = 1385.0 - 3111.0 * r + 543.0 * (r * r) - (r * r * r);
          var aa = p * n * t + (p / 6.0 * Math.pow(n, 3) * u * Math.pow(t, 3)) + (p / 120.0 * Math.pow(n, 5) * w * Math.pow(t, 5)) + (p / 5040.0 * Math.pow(n, 7) * y * Math.pow(t, 7));
          var ab = 6367449.14570093 * (k - (0.00251882794504 * Math.sin(2 * k)) + (0.00000264354112 * Math.sin(4 * k)) - (0.00000000345262 * Math.sin(6 * k)) + (0.000000000004892 * Math.sin(8 * k))) + (q / 2.0 * p * Math.pow(n, 2) * Math.pow(t, 2)) + (q / 24.0 * p * Math.pow(n, 4) * v * Math.pow(t, 4)) + (q / 720.0 * p * Math.pow(n, 6) * x * Math.pow(t, 6)) + (q / 40320.0 * p * Math.pow(n, 8) * z * Math.pow(t, 8));
          aa = aa * 0.9996 + 500000.0;
          ab = ab * 0.9996;
          if (ab < 0.0) ab += 10000000.0;
          var ad = 'CDEFGHJKLMNPQRSTUVWXX'.charAt(Math.floor(Lat / 8 + 10));
          var ae = Math.floor(aa / 100000);
          var af = ['ABCDEFGH', 'JKLMNPQR', 'STUVWXYZ'][(c - 1) % 3].charAt(ae - 1);
          var ag = Math.floor(ab / 100000) % 20;
          var ah = ['ABCDEFGHJKLMNPQRSTUV', 'FGHJKLMNPQRSTUVABCDE'][(c - 1) % 2].charAt(ag);

          function pad(val) {
            if (val < 10) {
              val = '0000' + val
            } else if (val < 100) {
              val = '000' + val
            } else if (val < 1000) {
              val = '00' + val
            } else if (val < 10000) {
              val = '0' + val
            };
            return val
          };
          aa = Math.floor(aa % 100000);
          aa = pad(aa);
          ab = Math.floor(ab % 100000);
          ab = pad(ab);
          return c + ad + ' ' + af + ah + ' ' + aa + ' ' + ab;
        }
      </script>
</body>

</html>
